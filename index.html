<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏—Å—Ç–æ—Ä–∏–π –∏ –∏–¥–µ–π</title>
<style>
  body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(120deg, #fffefc, #f9f9f6 40%, #fffde7 90%);
    color: #444;
    user-select: none;
    -webkit-font-smoothing: antialiased;
  }
  .container {
    max-width: 720px;
    margin: 40px auto;
    background: #fff;
    border-radius: 16px;
    box-shadow:
      0 4px 12px rgba(0,0,0,0.05),
      inset 0 0 10px #f0f0f0;
    padding: 30px 25px;
  }
  h1 {
    font-weight: 700;
    font-size: 28px;
    color: #666;
    margin-bottom: 24px;
    text-align: center;
  }
  .warning {
    background: #fff8e1;
    border: 1.5px solid #ffecb3;
    border-radius: 12px;
    color: #a67c00;
    font-weight: 600;
    padding: 14px 18px;
    margin-bottom: 20px;
    font-size: 15px;
    line-height: 1.3;
    text-align: center;
  }
  button {
    display: block;
    background: #f4f6f9;
    border: 1.5px solid #d8d8d8;
    border-radius: 12px;
    padding: 12px 20px;
    font-weight: 600;
    font-size: 15px;
    color: #555;
    cursor: pointer;
    margin: 0 auto 20px auto;
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    width: fit-content;
  }
  button:hover:not(:disabled) {
    background: #e6eaf4;
    box-shadow: 0 0 12px rgba(102,122,182,0.25);
  }
  button:disabled {
    opacity: 0.5;
    cursor: default;
    box-shadow: none;
  }
  .boxes-add-panel {
    display: flex;
    flex-wrap: wrap;
    gap: 14px;
    justify-content: center;
    margin-bottom: 30px;
  }
  .box {
    min-width: 110px;
    padding: 10px 18px;
    background: #fefefe;
    border-radius: 14px;
    box-shadow:
      0 4px 6px rgba(0,0,0,0.07),
      inset 0 1px 0 rgba(255,255,255,0.9);
    font-weight: 600;
    font-size: 15px;
    text-align: center;
    color: #5a5a5a;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    flex-shrink: 0;
    transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
  }
  .box:hover {
    box-shadow:
      0 6px 14px rgba(0,0,0,0.12),
      inset 0 1px 0 rgba(255,255,255,1);
    background: #f9fbff;
    color: #3b4cff;
  }
  .selected-boxes {
    display: flex;
    gap: 12px;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding-bottom: 8px;
    margin-bottom: 30px;
  }
  .selected-box {
    min-width: 110px;
    background: #f0f3ff;
    border-radius: 14px;
    box-shadow:
      0 5px 8px rgba(51, 66, 224, 0.2),
      inset 0 2px 8px rgba(235, 238, 255, 0.9);
    color: #2e3bb1;
    font-weight: 700;
    font-size: 15px;
    padding: 12px 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    user-select: none;
    flex-shrink: 0;
    white-space: nowrap;
  }
  .arrow-btn {
    border: none;
    background: #d4d8ff;
    border-radius: 50%;
    width: 26px;
    height: 26px;
    font-size: 17px;
    line-height: 1;
    font-weight: 700;
    color: #4a54a1;
    cursor: pointer;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.25s ease;
    margin-left: 8px;
  }
  .arrow-btn:disabled {
    background: #f0f2fc;
    color: #a5a9c7;
    cursor: default;
  }
  .arrow-btn:hover:not(:disabled) {
    background: #b6c1ff;
    color: #28307f;
  }
  .generated-text {
    margin-top: 30px;
    min-height: 100px;
    background: #fefefe;
    border-radius: 16px;
    padding: 18px 24px;
    box-shadow: inset 0 1px 6px #e6e9ff;
    font-weight: 600;
    font-size: 17px;
    color: #3a3a66;
    white-space: pre-wrap;
    user-select: text;
  }
  @media (max-width: 600px) {
    .box {
      min-width: 90px;
      font-size: 14px;
      padding: 8px 14px;
    }
    .selected-box {
      min-width: 90px;
      font-size: 14px;
      padding: 10px 12px;
    }
    .arrow-btn {
      width: 22px;
      height: 22px;
      font-size: 15px;
      margin-left: 6px;
    }
  }
</style>
</head>
<body>

<div class="container" role="main" aria-label="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏—Å—Ç–æ—Ä–∏–π –∏ –∏–¥–µ–π">
  <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏—Å—Ç–æ—Ä–∏–π –∏ –∏–¥–µ–π ‚ù§</h1>

  <div class="warning" role="alert" aria-live="polite">
    ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –ü–æ–ª—É—á–∏–≤—à–∏–π—Å—è —Ç–µ–∫—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —Å—Ç—Ä–∞–Ω–Ω—ã–º –∏ —Å–º–µ—à–Ω—ã–º. –õ—É—á—à–µ –Ω–µ –ø–∏—Ç—å –∏ –Ω–µ –µ—Å—Ç—å –ø–æ–∫–∞ —á–∏—Ç–∞–µ—à—å ‚Äî –º–æ–∂–µ—Ç –≤ –≥–æ—Ä–ª–µ –æ—Ç —Å–º–µ—Ö–∞ –∑–∞—Å—Ç—Ä—è—Ç—å üòÜ
  </div>

  <button id="toggleBtn" aria-expanded="false" aria-controls="addPanel" aria-haspopup="true">–ü–æ–∫–∞–∑–∞—Ç—å —á–∞—Å—Ç–∏ —Ä–µ—á–∏ +</button>

  <div id="addPanel" class="boxes-add-panel" style="display:none;" aria-label="–î–æ—Å—Ç—É–ø–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—á–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è" role="region" aria-live="polite">
    <!-- –ö–Ω–æ–ø–∫–∏ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏ –±—É–¥—É—Ç —Å—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
  </div>

  <div id="selectedBoxes" class="selected-boxes" aria-label="–í—ã–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—á–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞">
    <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—á–∏ -->
  </div>

  <button id="createBtn" disabled aria-disabled="true">–°–æ–∑–¥–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç</button>

  <div id="output" class="generated-text" aria-live="polite" aria-label="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç"></div>
</div>

<script>
  // –°–ø–∏—Å–æ–∫ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å
  const PARTS_OF_SPEECH = [
    "–ì–ª–∞–≥–æ–ª",
    "–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ",
    "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ",
    "–ù–∞—Ä–µ—á–∏–µ",
    "–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ",
    "–ß–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ",
    "–°–æ—é–∑",
    "–ß–∞—Å—Ç–∏—Ü–∞",
    "–ú–µ–∂–¥–æ–º–µ—Ç–∏–µ",
    "–ü—Ä–∏—á–∞—Å—Ç–∏–µ",
    "–î–µ–µ–ø—Ä–∏—á–∞—Å—Ç–∏–µ",
    "–¢–æ—á–∫–∞",
    "–ó–∞–ø—è—Ç–∞—è",
    "–í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫",
  ];

  // –°–ª–æ–≤–∞—Ä–∏ ‚Äî –≤—Å—Ç–∞–≤–ª—è–π —Å–≤–æ–∏ —Å–ª–æ–≤–∞ –Ω–∏–∂–µ –≤ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
  const verbs = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const adjectives = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const nouns = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const adverbs = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const pronouns = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const numerals = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const conjunctions = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const particles = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const interjections = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const participles = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];
  const gerunds = [ /* *–í–°–¢–ê–í–¨ –°–Æ–î–ê –°–õ–û–í–ê–†–¨* */ ];

  // –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è
  const punctuation = {
    "–¢–æ—á–∫–∞": ".",
    "–ó–∞–ø—è—Ç–∞—è": ",",
    "–í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫": "!",
  };

  // –û–±—ä–µ–∫—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ª–æ–≤–∞—Ä—è–º –ø–æ —á–∞—Å—Ç–∏ —Ä–µ—á–∏
  const dictionary = {
    "–ì–ª–∞–≥–æ–ª": verbs,
    "–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ": adjectives,
    "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ": nouns,
    "–ù–∞—Ä–µ—á–∏–µ": adverbs,
    "–ú–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ": pronouns,
    "–ß–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–µ": numerals,
    "–°–æ—é–∑": conjunctions,
    "–ß–∞—Å—Ç–∏—Ü–∞": particles,
    "–ú–µ–∂–¥–æ–º–µ—Ç–∏–µ": interjections,
    "–ü—Ä–∏—á–∞—Å—Ç–∏–µ": participles,
    "–î–µ–µ–ø—Ä–∏—á–∞—Å—Ç–∏–µ": gerunds,
  };

  const toggleBtn = document.getElementById("toggleBtn");
  const addPanel = document.getElementById("addPanel");
  const selectedBoxesDiv = document.getElementById("selectedBoxes");
  const createBtn = document.getElementById("createBtn");
  const outputDiv = document.getElementById("output");

  // –ú–∞—Å—Å–∏–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π —Ä–µ—á–∏ –≤ –ø–æ—Ä—è–¥–∫–µ, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  let selectedBoxes = [];

  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏
  function renderAddPanel() {
    addPanel.innerHTML = "";
    PARTS_OF_SPEECH.forEach(part => {
      const btn = document.createElement("div");
      btn.className = "box";
      btn.tabIndex = 0;
      btn.textContent = part;
      btn.title = `–î–æ–±–∞–≤–∏—Ç—å "${part}" –≤ –ø–æ—Ä—è–¥–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏`;
      btn.onclick = () => addBox(part);
      btn.onkeydown = (e) => {
        if (e.key === "Enter" || e.key === " ") {
          addBox(part);
          e.preventDefault();
        }
      };
      addPanel.appendChild(btn);
    });
  }

  // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —á–∞—Å—Ç—å —Ä–µ—á–∏ –≤ —Å–ø–∏—Å–æ–∫
  function addBox(box) {
    selectedBoxes.push(box);
    renderSelectedBoxes();
    updateCreateButton();
  }

  // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π —Ä–µ—á–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏
  function renderSelectedBoxes() {
    selectedBoxesDiv.innerHTML = "";
    selectedBoxes.forEach((box, i) => {
      const div = document.createElement("div");
      div.className = "selected-box";
      div.textContent = box;

      const arrowsDiv = document.createElement("div");

      const leftBtn = document.createElement("button");
      leftBtn.className = "arrow-btn";
      leftBtn.textContent = "‚Üê";
      leftBtn.title = `–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å "${box}" –≤–ª–µ–≤–æ`;
      leftBtn.disabled = i === 0;
      leftBtn.onclick = () => moveBox(i, "left");

      const rightBtn = document.createElement("button");
      rightBtn.className = "arrow-btn";
      rightBtn.textContent = "‚Üí";
      rightBtn.title = `–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å "${box}" –≤–ø—Ä–∞–≤–æ`;
      rightBtn.disabled = i === selectedBoxes.length - 1;
      rightBtn.onclick = () => moveBox(i, "right");

      arrowsDiv.appendChild(leftBtn);
      arrowsDiv.appendChild(rightBtn);

      div.appendChild(arrowsDiv);
      selectedBoxesDiv.appendChild(div);
    });
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–µ–π —Ä–µ—á–∏
  function moveBox(index, direction) {
    if (direction === "left" && index > 0) {
      [selectedBoxes[index - 1], selectedBoxes[index]] = [selectedBoxes[index], selectedBoxes[index - 1]];
    } else if (direction === "right" && index < selectedBoxes.length - 1) {
      [selectedBoxes[index + 1], selectedBoxes[index]] = [selectedBoxes[index], selectedBoxes[index + 1]];
    }
    renderSelectedBoxes();
  }

  // –í–∫–ª—é—á–∞–µ–º –∏–ª–∏ –≤—ã–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
  function updateCreateButton() {
    const isEnabled = selectedBoxes.length > 0;
    createBtn.disabled = !isEnabled;
    createBtn.setAttribute("aria-disabled", !isEnabled);
  }

  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É —á–∞—Å—Ç–µ–π —Ä–µ—á–∏
  function generateText() {
    let text = "";
    selectedBoxes.forEach(pos => {
      if (punctuation[pos]) {
        // –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞–∫ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–ª–æ–≤—É –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞ –ø–µ—Ä–µ–¥ –Ω–∏–º
        text = text.trimEnd() + punctuation[pos] + " ";
      } else {
        const words = dictionary[pos];
        if (!words || words.length === 0) return;
        const randWord = words[Math.floor(Math.random() * words.length)];
        text += randWord + " ";
      }
    });
    outputDiv.textContent = text.trim();
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è —á–∞—Å—Ç–µ–π —Ä–µ—á–∏
  toggleBtn.onclick = () => {
    const isShown = addPanel.style.display === "flex";
    addPanel.style.display = isShown ? "none" : "flex";
    toggleBtn.textContent = isShown ? "–ü–æ–∫–∞–∑–∞—Ç—å —á–∞—Å—Ç–∏ —Ä–µ—á–∏ +" : "–°–∫—Ä—ã—Ç—å —á–∞—Å—Ç–∏ —Ä–µ—á–∏ ‚Äì";
    toggleBtn.setAttribute("aria-expanded", String(!isShown));
  };

  createBtn.onclick = generateText;

function generateText() {
  let text = "";
  selectedBoxes.forEach(pos => {
    if (punctuation[pos]) {
      text = text.trimEnd() + punctuation[pos] + " ";
    } else {
      const words = dictionary[pos];
      if (!words || words.length === 0) return;
      const randWord = words[Math.floor(Math.random() * words.length)];
      text += randWord + " ";
    }
  });
  outputDiv.textContent = text.trim();
}

function generateText() {
  let text = "";
  selectedBoxes.forEach(pos => {
    if (punctuation[pos]) {
      text = text.trimEnd() + punctuation[pos] + " ";
    } else {
      const words = dictionary[pos];
      if (!words) {
        console.warn(`–ù–µ—Ç —Å–ª–æ–≤ –¥–ª—è —á–∞—Å—Ç–∏ —Ä–µ—á–∏ "${pos}"`);
        return;
      }
      if (words.length === 0) {
        console.warn(`–°–ª–æ–≤–∞—Ä—å –¥–ª—è —á–∞—Å—Ç–∏ —Ä–µ—á–∏ "${pos}" –ø—É—Å—Ç`);
        return;
      }
      const randWord = words[Math.floor(Math.random() * words.length)];
      text += randWord + " ";
    }
  });
  outputDiv.textContent = text.trim();
}

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  renderAddPanel();
  updateCreateButton();

</script>

</body>
</html>
